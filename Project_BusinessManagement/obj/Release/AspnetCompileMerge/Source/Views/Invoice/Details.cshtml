@model Project_BusinessManagement.Models.MInvoice

@{
    ViewBag.Title = "Detalle";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Detalle</h2>

<div>
    <h4>Factura</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.LIdInvoice)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.LIdInvoice)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.LCdInvoice)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.LCdInvoice)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.LCreationDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.LCreationDate)
        </dd>

    </dl>
    <div class="table-responsive">
        <table class="tablesorter">
            <thead>
                <tr>
                    <th>
                        Nombre Producto
                    </th>
                    <th>
                        Cantidad
                    </th>
                    <th>
                        Valor Producto
                    </th>
                    <th>
                        Valor Total
                    </th>
                </tr>
            </thead>
            @foreach (var item in Model.LListMInvoiceItem)
            {
                <tbody>
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.LProduct.LNameProduct)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LQuantity)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LValueProd)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.LValueTotal)
                        </td>
                    </tr>
                </tbody>
            }
        </table>
        @*@Html.Partial("~/Views/Shared/_Pagination.cshtml")

        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()


            <div class="form-actions no-color">
                <input type="submit" value="Imprimir" class="btn btn-default" /> |
            </div>
        }*@
        </div>
    </div>
<p>
    @Html.ActionLink("Ir a Pedidos", "DashBoardOrder", "Order")
</p>
@*<div>
    <label class="checkbox">
        <input type="checkbox" id="useDefaultPrinter" /> <strong>Print to Default printer</strong> or...
    </label>
</div>

<div id="loadPrinters">
    Click to load and select one of the installed printers!
    <br />
    <input type="button" onclick="javascript:jsWebClientPrint.getPrinters();" value="Load installed printers..." />
    <br /><br />
</div>

<div id="installedPrinters" style="visibility:hidden">
    <label for="installedPrinterName">Select an installed Printer:</label>
    <select name="installedPrinterName" id="installedPrinterName"></select>
</div>*@
<script type="text/javascript">
    var wcppGetPrintersTimeout_ms = 10000; //10 sec
    var wcppGetPrintersTimeoutStep_ms = 500; //0.5 sec

    function wcpGetPrintersOnSuccess() {
        // Display client installed printers
        if (arguments[0].length > 0) {
            var p = arguments[0].split("|");
            var options = '';
            for (var i = 0; i < p.length; i++) {
                options += '<option>' + p[i] + '</option>';
            }
            $('#installedPrinters').css('visibility', 'visible');
            $('#installedPrinterName').html(options);
            $('#installedPrinterName').focus();
            $('#loadPrinters').hide();
        } else {
            alert("No printers are installed in your system.");
        }
    }
    function wcpGetPrintersOnFailure() {
        // Do something if printers cannot be got from the client
        alert("No printers are installed in your system.");
    }
</script>

<input type="button" style="font-size:18px" class="btn btn-warning" onclick="javascript: jsWebClientPrint.print('useDefaultPrinter=' + $('#useDefaultPrinter').attr('checked') + '&printerName=' + $('#installedPrinterName').val() + '&pIdInvoice=' + '0');" value="Imprimir Factura" />


@section scripts{

    @* Register the WebClientPrint script code generated by PrintESCPOSController. *@

    @Html.Raw(ViewBag.WCPScript);

}
